<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Silvia & Alfonso · Relationship Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />
    <script
      src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
      integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
      crossorigin=""
    ></script>
  </head>
  <body>
    <!-- Netflix-style profile selector -->
    <div class="profile-overlay" id="profileOverlay">
      <div class="profile-overlay-inner">
        <h1 class="profile-title">¿Quién está viendo?</h1>
        <p class="profile-subtitle">Elige tu perfil para entrar al panel de control.</p>
        <div class="profile-grid">
          <button class="profile-card" data-profile="silvia">
            <div class="profile-avatar-wrapper">
              <img src="img/gallery08.jpeg" alt="Silvia" class="profile-avatar" />
            </div>
            <span class="profile-name">Silvia</span>
          </button>
          <button class="profile-card" data-profile="alfonso">
            <div class="profile-avatar-wrapper">
              <img src="img/gallery13.jpeg" alt="Alfonso" class="profile-avatar" />
            </div>
            <span class="profile-name">Alfonso</span>
          </button>
        </div>
        <p class="profile-hint">Puedes cambiar de perfil o cerrar sesión desde la parte superior derecha del dashboard.</p>
      </div>
    </div>

    <div class="page-shell">
      <!-- Top nav -->
      <header class="top-nav">
        <div class="brand-wrapper">
          <div class="brand-photo">
            <img src="img/gallery01.jpeg" alt="Silvia y Alfonso" />
          </div>
          <div class="brand-text">
            <span class="brand-kpi-label">Silvia &amp; Alfonso</span>
            <span class="brand-title">Relationship Dashboard</span>
          </div>
        </div>
        <div class="top-nav-right">
          <div class="current-profile" id="currentProfileLabel">Perfil: –</div>
          <button class="btn btn-secondary" id="btnLogout">Cerrar sesión</button>
        </div>
      </header>

      <main class="main-content">
        <!-- HERO -->
        <section class="section section-hero">
          <div class="section-inner hero-layout">
            <div class="hero-left">
              <h1>Los números serios (y no tan serios) de esta relación</h1>
              <p class="hero-subtitle">
                KPIs de enfados, viajes, guardias, operaciones, pasta carbonara y el valor aproximado del armario de Silvia.
              </p>
              <div class="hero-badges">
                <span class="badge">Días juntos: <span id="daysTogetherHero">–</span></span>
                <span class="badge badge-soft">Enfados totales: <span id="totalEnfadosHero">–</span></span>
                <span class="badge badge-soft">Media enfados/día: <span id="avgEnfadosDiaHero">–</span></span>
              </div>
            </div>
            <div class="hero-right">
              <div class="hero-photo">
                <img src="img/gallery01.jpeg" alt="Silvia y Alfonso en un viaje" />
              </div>
              <div class="hero-highlight">
                <p class="hero-highlight-label">Si seguís al mismo ritmo de viajes…</p>
                <p class="hero-highlight-value"><span id="viajes90Value">–</span> viajes</p>
                <p class="hero-highlight-small">Estimación de viajes totales juntos cuando Silvia tenga 90 años.</p>
              </div>
            </div>
          </div>
        </section>

        <!-- KPIs ENFADOS & RELACIÓN -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Drama medido con cariño</h2>
              <p>Enfados por mes, total anual, media mensual y media diaria desde el 28/02/2023.</p>
            </div>
            <div class="kpi-grid">
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Enfados por mes</span>
                  <span class="card-pill">Solo editable por Alfonso</span>
                </div>
                <div class="card-body">
                  <div class="anger-header">
                    <div>
                      <div class="anger-primary">
                        Enfados este mes:
                        <span id="angerThisMonth">0</span>
                      </div>
                      <div class="anger-secondary">
                        Total año: <span id="angerYearTotalValue">0</span> ·
                        Media mensual: <span id="angerMonthlyAvgValue">0</span> ·
                        Media diaria total: <span id="angerDailyAvgValue">0</span>
                      </div>
                    </div>
                    <button class="btn btn-accent edit-only" id="btnAddAnger">+1 enfado</button>
                  </div>
                  <canvas id="angerChart"></canvas>
                  <p class="small-note" id="angerTrendNote"></p>
                </div>
              </div>
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Días juntos &amp; ritmo de viajes</span>
                </div>
                <div class="card-body">
                  <p class="kpi-number" id="daysTogether">–</p>
                  <p class="small-note">
                    Días desde 28/02/2023. Viajes realizados: <span id="viajesTotales">7</span>.
                    Media de viajes/año: <span id="viajesPorAnio">–</span>.
                  </p>
                  <p class="small-note">
                    Proyección a largo plazo visible en el gráfico de viajes más abajo.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- VIAJES: MAPA + PROYECCIÓN -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header with-actions">
              <div>
                <h2>Viajes juntos</h2>
                <p>Mapa de países visitados y proyección de viajes hasta los 90 años.</p>
              </div>
            </div>
            <div class="two-column-layout">
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Mapa del mundo</span>
                </div>
                <div class="card-body">
                  <div id="worldMap" class="leaflet-map"></div>
                  <p class="small-note">
                    Países visitados desbloqueados. Puedes asociar recuerdos a cada uno desde este mapa.
                  </p>
                  <div class="remember-box">
                    <h3>Recuerdo gracioso</h3>
                    <p id="memoryText">Pulsa en un país visitado para ver o escribir un recuerdo.</p>
                    <textarea id="memoryInput" placeholder="Escribe aquí el recuerdo y se guardará para la próxima vez."></textarea>
                    <button class="btn btn-secondary edit-only" id="btnSaveMemory">Guardar recuerdo</button>
                  </div>
                </div>
              </div>
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Proyección de viajes</span>
                </div>
                <div class="card-body">
                  <canvas id="viajesChart"></canvas>
                  <p class="small-note">
                    Cálculo: se toma el ritmo actual de viajes/año y se proyecta hasta que Silvia tenga 90 años (usando su fecha de nacimiento real).
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- MÉDICA: GUARDIAS, VIDAS, OPERACIONES -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Modo médico: guardias, vidas salvadas y operaciones</h2>
              <p>Desde mayo de 2024, con estimaciones pensadas para motivarla (aunque odie las guardias).</p>
            </div>
            <div class="three-column-layout">
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Guardias &amp; vidas salvadas</span>
                </div>
                <div class="card-body">
                  <p class="kpi-number" id="totalGuardias">–</p>
                  <p class="small-note">
                    Guardias estimadas desde mayo 2024 (media 6,3 guardias/mes).
                  </p>
                  <p class="small-note">
                    Según el modelo: por cada 2,9 guardias, se estima que Silvia ha salvado 1 vida.
                  </p>
                  <p class="kpi-number small" id="vidasSalvadas">– vidas</p>
                </div>
              </div>
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Operaciones realizadas</span>
                  <span class="card-pill">Rango 3–6 por mes</span>
                </div>
                <div class="card-body">
                  <p class="kpi-number" id="opsMesActual">–</p>
                  <p class="small-note">Operaciones estimadas este mes.</p>
                  <div class="ops-controls">
                    <button class="btn btn-secondary edit-only" id="btnOpsMinus">-1</button>
                    <button class="btn btn-accent edit-only" id="btnOpsPlus">+1</button>
                  </div>
                  <p class="small-note">Histórico total: <span id="opsTotal">–</span> operaciones.</p>
                </div>
              </div>
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Contadores varios</span>
                </div>
                <div class="card-body">
                  <div class="counter-row">
                    <span>Veces que Silvia ha llevado razón</span>
                    <div class="counter-actions">
                      <span id="countSilviaRazon">0</span>
                      <button class="btn btn-accent btn-tiny edit-only" id="btnSilviaRazon">+1</button>
                    </div>
                  </div>
                  <div class="counter-row">
                    <span>Veces que Alfonso ha llevado razón</span>
                    <div class="counter-actions">
                      <span id="countAlfonsoRazon">0</span>
                      <button class="btn btn-accent btn-tiny edit-only" id="btnAlfonsoRazon">+1</button>
                    </div>
                  </div>
                  <div class="counter-row">
                    <span>Veces que habéis comido pasta carbonara</span>
                    <div class="counter-actions">
                      <span id="countCarbonara">0</span>
                      <button class="btn btn-accent btn-tiny edit-only" id="btnCarbonara">+1</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ARMARIO & ZARA KPI -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Valor estimado del armario de Silvia</h2>
              <p>Basado en categorías de prendas, número estimado y un valor medio por prenda.</p>
            </div>
            <div class="wardrobe-layout">
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Panel de control del armario</span>
                  <span class="card-pill">Solo Alfonso puede editar</span>
                </div>
                <div class="card-body wardrobe-grid" id="wardrobeGrid">
                  <!-- Se rellena desde JS -->
                </div>
              </div>
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Resumen de valor</span>
                </div>
                <div class="card-body">
                  <p class="kpi-number" id="wardrobeTotal">– €</p>
                  <p class="small-note">
                    Cálculo automático en tiempo real a partir del número de prendas por categoría.
                  </p>
                  <ul class="small-note">
                    <li>Top: 6€ · Camiseta: 7€ · Blusa: 6€ · Jersey: 10€</li>
                    <li>Chaqueta: 30€ · Falda: 15€ · Mono: 12€ · Abrigo: 50€</li>
                    <li>Pantalones: 12€ · Vaqueros: 12€</li>
                    <li>Bolso: 22€ · Zapatos: 30€ · Botas: 25€ · Zapatillas: 60€</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- PLAYLIST -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Banda sonora oficial</h2>
              <p>Canciones que huelen a viajes, coche, risas y algún enfadillo.</p>
            </div>
            <div class="card">
              <div class="card-body">
                <ul class="song-list" id="songList">
                  <!-- Songs from JS -->
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- GALERÍA CON ANIMACIONES -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Galería de momentos</h2>
              <p>Un slider principal + miniaturas con animación para repasar viajes y postureos.</p>
            </div>
            <div class="gallery-shell">
              <div class="gallery-main">
                <img src="img/gallery01.jpeg" alt="Foto destacada" id="galleryMainImage" />
              </div>
              <div class="gallery-thumbs">
                  <img src="img/gallery01.jpeg" alt="Silvia & Alfonso 1" class="gallery-thumb" data-index="0"/>
                  <img src="img/gallery02.jpeg" alt="Silvia & Alfonso 2" class="gallery-thumb" data-index="1"/>
                  <img src="img/gallery03.jpeg" alt="Silvia & Alfonso 3" class="gallery-thumb" data-index="2"/>
                  <img src="img/gallery04.jpeg" alt="Silvia & Alfonso 4" class="gallery-thumb" data-index="3"/>
                  <img src="img/gallery05.jpeg" alt="Silvia & Alfonso 5" class="gallery-thumb" data-index="4"/>
                  <img src="img/gallery06.jpeg" alt="Silvia & Alfonso 6" class="gallery-thumb" data-index="5"/>
                  <img src="img/gallery07.jpeg" alt="Silvia & Alfonso 7" class="gallery-thumb" data-index="6"/>
                  <img src="img/gallery08.jpeg" alt="Silvia & Alfonso 8" class="gallery-thumb" data-index="7"/>
                  <img src="img/gallery09.jpeg" alt="Silvia & Alfonso 9" class="gallery-thumb" data-index="8"/>
                  <img src="img/gallery10.jpeg" alt="Silvia & Alfonso 10" class="gallery-thumb" data-index="9"/>
                  <img src="img/gallery11.jpeg" alt="Silvia & Alfonso 11" class="gallery-thumb" data-index="10"/>
                  <img src="img/gallery12.jpeg" alt="Silvia & Alfonso 12" class="gallery-thumb" data-index="11"/>
                  <img src="img/gallery13.jpeg" alt="Silvia & Alfonso 13" class="gallery-thumb" data-index="12"/>
                  <img src="img/gallery14.jpeg" alt="Silvia & Alfonso 14" class="gallery-thumb" data-index="13"/>
                  <img src="img/gallery15.jpeg" alt="Silvia & Alfonso 15" class="gallery-thumb" data-index="14"/>
                  <img src="img/gallery16.jpeg" alt="Silvia & Alfonso 16" class="gallery-thumb" data-index="15"/>
                  <img src="img/gallery17.jpeg" alt="Silvia & Alfonso 17" class="gallery-thumb" data-index="16"/>
                  <img src="img/gallery18.jpeg" alt="Silvia & Alfonso 18" class="gallery-thumb" data-index="17"/>
                  <img src="img/gallery19.jpeg" alt="Silvia & Alfonso 19" class="gallery-thumb" data-index="18"/>
              </div>
            </div>
          </div>
        </section>

        <!-- GENERADOR DE PLANES -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Generador de planes</h2>
              <p>Combina clima, dinero, momento del día y lugar para sacar el plan perfecto.</p>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="plan-grid">
                  <div class="plan-inputs">
                    <label class="input-label" for="climaSelect">Clima</label>
                    <select id="climaSelect">
                      <option value="soleado">Soleado</option>
                      <option value="nublado">Nublado</option>
                      <option value="lluvioso">Lluvioso</option>
                    </select>

                    <label class="input-label" for="dineroSelect">Presupuesto</label>
                    <select id="dineroSelect">
                      <option value="bajo">Bajo</option>
                      <option value="medio">Medio</option>
                      <option value="alto">Alto</option>
                    </select>

                    <label class="input-label" for="momentoSelect">Momento del día</label>
                    <select id="momentoSelect">
                      <option value="dia">Día</option>
                      <option value="tarde">Tarde</option>
                      <option value="noche">Noche</option>
                    </select>

                    <label class="input-label" for="lugarSelect">Lugar</label>
                    <select id="lugarSelect">
                      <option value="casa">En casa</option>
                      <option value="fuera">Fuera</option>
                    </select>

                    <label class="input-label" for="extraPrompt">Extra opcional</label>
                    <textarea id="extraPrompt" placeholder="Ej: con pasta carbonara, plan muy tranqui, plan de risas, etc."></textarea>
                    <button class="btn btn-accent" id="btnGenerateSmartPlan">Generar plan</button>
                  </div>
                  <div class="plan-output-area">
                    <div class="plan-output" id="smartPlanOutput">
                      Ajusta los parámetros a la izquierda y aquí aparecerá un plan pensado específicamente para vosotros dos.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- MAPA CÓRDOBA CARBONARA -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Mapa de pasta carbonara en Córdoba</h2>
              <p>Restaurantes (lista inicial editable) donde podéis atacar una carbonara.</p>
            </div>
            <div class="two-column-layout">
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Mapa estilo Google</span>
                </div>
                <div class="card-body">
                  <div id="cordobaMap" class="leaflet-map"></div>
                  <p class="small-note">
                    Los puntos representan restaurantes de Córdoba donde se ha incluido una carbonara en la carta (lista definida a mano en el código y ampliable).
                  </p>
                </div>
              </div>
              <div class="card">
                <div class="card-header">
                  <span class="card-title">Lista de sitios</span>
                </div>
                <div class="card-body">
                  <ul class="restaurant-list" id="restaurantList"></ul>
                  <p class="small-note">
                    Si encontráis nuevos sitios, solo hay que añadirlos en el array <code>cordobaRestaurants</code> en <code>app.js</code>.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- VALES CANJEABLES -->
        <section class="section">
          <div class="section-inner">
            <div class="section-header">
              <h2>Vales canjeables de Alfonso</h2>
              <p>Cada vale se inhabilita cuando Silvia lo canjea. No hay marcha atrás.</p>
            </div>
            <div class="card">
              <div class="card-body voucher-grid" id="voucherGrid">
                <!-- Relleno desde JS -->
              </div>
            </div>
          </div>
        </section>

        <!-- SECCIÓN SECRETA -->
        <section class="section" id="secretSection">
          <div class="section-inner">
            <div class="section-header">
              <h2>Zona secreta</h2>
              <p>Solo accesible desde el perfil de Silvia con la contraseña correcta.</p>
            </div>
            <div class="card">
              <div class="card-body">
                <div class="secret-tabs">
                  <button class="secret-tab active" data-tab="info">Info</button>
                  <button class="secret-tab secret-tab-locked" data-tab="gift">???</button>
                </div>
                <div class="secret-panel active" data-panel="info">
                  <p>
                    Aquí no parece haber nada especial… pero si estás en el perfil de Silvia y sabes la contraseña correcta,
                    la pestaña con interrogantes tiene algo importante que ver con un viaje.
                  </p>
                </div>
                <div class="secret-panel" data-panel="gift">
                  <div id="secretContent">
                    <form id="secretForm">
                      <label class="input-label" for="secretPassword">Introduce la contraseña:</label>
                      <input type="password" id="secretPassword" placeholder="••••••••••••" />
                      <button type="submit" class="btn btn-accent">Desbloquear</button>
                      <p class="small-note">Pista: tiene que ver con un regalo de cumple en 2025…</p>
                      <p class="error-text" id="secretError"></p>
                    </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <footer class="footer">
          <p>Hecho para Silvia, con mucho cariño, algo de drama medido y bastante código.</p>
        </footer>
      </main>
    </div>

    <script>
      const SILVIA_SECRET_PASSWORD = "regalocumple2025";
      const BAGPIPE_GIF_URL = "https://media3.giphy.com/media/v1.Y2lkPTc5MGI3NjExZ2I4b3loaDgzOWsweHZiMjBjazgwMTlhM3FyeXk5NnlmcXkwemVnaCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/xT5LMOnGEK6FlVfaJW/giphy.gif";
      const SECRET_PLAYLIST_URL = "https://open.spotify.com/playlist/5k5sKkmrfaPn3MauHrYboM?si=RmnWV4SMRi6G9smZp_RNOw&pi=zw5Lx11yTmqFF";
    </script>
    <script src="app.js"></script>
  </body>
</html>
